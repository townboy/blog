---
layout: post
title: hdu 2482 Transit search
date: 2012-10-09 21:47
categories: acmicpc
---

这道题目直接被威哥定义为了阅读题,赛后做了下,感觉还是很不错的一道题目,题目确实比较长,首先要把给定区块的坐标转化为全局的起始点和终点的坐标.然后需要从起点和终点需要搭乘至少多少辆公交车,图中给定至多5000个车站,在1000m范围内的公交车站可以上下车,有至多100条公交线路,每条公交线路至多途径30个公交站台.

粗粗的感觉了下可以用最短路来做,但是建图方面比较纠结,初步自己的想法就是,可以通过一个变形的spfa来更新,把所有的公交站台当成顶点,然后每次对于出队列的站台就更新通过这个站台的所有公交线路,把所有的相连的车站点的搭乘次数更新成当前的车站次数+1,就代表可以通过这个车站转移过去.

后来不小心看到了题解,自己的想法也是正确的,但是更本质的东西就是,可以把所有的车站线路建成图中的顶点,然后如果两个车站拥有共同站点,那么就建边,最后把起点终点连接到想对应的路线顶点就可以了,直接跑最短路,在操作上,直接把所有的顶点所对应的路线id记录,每两个加边即可.

看到了另外一种建图的方法,就是把所有的车站全部建成顶点,所有的公交线路建成顶点,所有的顶点到所属的线路建一条长度是的单向边,从公交线路到它所拥有的车站建一条长度是0的单向边,可以这么理解,上车转车次数增加1,下车无影响,同时可以去能到达的公交线路,真是很奇妙.

本质上以上三种都是相同的,可惜的就是在比赛时候一种都没想出来...很神奇,很有趣.

